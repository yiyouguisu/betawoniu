<div id="hotel_list_frame" class="page_frame hide">
    <div class="header center z-index112 pr f18" style="position:fixed;top:0;left:0;right:0;z-index:9999">
        <div class="stay_top"> 
            <div class="stay_box">
                <div class="stay_a stay_date fl">
                    <div class="stay_a1">住 4-30</div>
                    <div class="stay_a2">离 5-10</div>
                </div>
                <div class="stay_b f0 fr">
                    <input type="text" class="stay_text vertical" placeholder="输入美宿或关键词搜索...">
                    <input type="button" class="stay_btn vertical">
                </div>
            </div>
        </div>
        <div class="head_go pa">
            <a href="#" id="h_l_back">
                <img src="__IMG__/go.jpg">
            </a><span>&nbsp;</span>
        </div>
        <div class="tra_pr map_small f14 pa">
            <a href="">
                <img src="__IMG__/map_small.jpg">地图</a>
        </div>
    </div>
    <div class="container" style="margin-top:6rem">
        <div class="land">
            <div class="tra_list pr z-index112 center f14">
                <div class="tra_li tra_li_on">按特色</div>
                <div class="tra_drop tra_click">
                    <div class="act_pad">
                        <div class="dress_box">
                            <div class="dress_b act_a center moch_click f14">
                                <ul>
                                    <li>诗词歌赋</li>
                                    <li>谈经论股</li>
                                    <li>花前月下</li>
                                    <li>探险寻宝</li>
                                    <li>酒色生香</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tra_li tra_li_on">按位置</div>
                <div class="tra_drop">
                    <div class="tra_dropA_box">
                        <div class="tra_dropA">
                            <select>
                                <option>浙江省</option>
                                <option>江苏省</option>
                            </select>
                        </div>
                        <div class="tra_dropA">
                            <select>
                                <option>杭州市</option>
                                <option>苏州市</option>
                            </select>
                        </div>
                        <div class="tra_dropA">
                            <select>
                                <option>西湖区</option>
                                <option>园区</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="tra_li tra_li_on">按价格</div>
                <div class="tra_drop">
                    <div class="mng_top">
                        <div class="scr_top">
                            <div class="scr_b" style="margin-bottom:2rem; padding:0 2.5%">
                                <div id="slider-range"></div>
                                <div class="number">
                                    <div class="number_a fl">￥0</div>
                                    <div class="number_b fr">￥5000</div>
                                </div>
                            </div>

                            <div class="mng_content">
                                <div class="mng_left fl">￥<span>100</span> — ￥<span>1000</span>
                                </div>
                                <input type="button" class="mng_btn fr" value="确定">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tra_li tra_li_on">筛选</div>
                <div class="tra_drop">
                    <div class="stay_left fl">
                        <ul>
                            <li class="stay_leftCut">设施服务</li>
                            <li>特色</li>
                            <li>床型</li>
                            <li>面积</li>
                            <li>评分</li>
                        </ul>
                    </div>
                    <div class="stay_right fl">
                        <ul>
                            <li>
                                <img src="__IMG__/stay_b1.png">不限</li>
                            <li>
                                <img src="__IMG__/stay_b2.png">接机/接站</li>
                            <li>
                                <img src="__IMG__/stay_b3.png">洗衣服务</li>
                            <li>
                                <img src="__IMG__/stay_b4.png">租车服务</li>
                            <li>
                                <img src="__IMG__/stay_b5.png">可携带宠物</li>
                            <li>
                                <img src="__IMG__/stay_b6.png">免费停车场</li>
                            <li>
                                <img src="__IMG__/stay_b7.png">wifi</li>
                            <li>
                                <img src="__IMG__/stay_b8.png">可自己下厨</li>
                            <li>
                                <img src="__IMG__/stay_b9.png">导游服务</li>
                            <li>
                                <img src="__IMG__/stay_b10.png">种植花草</li>
                            <li>
                                <img src="__IMG__/stay_b11.png">笔墨伺候</li>
                            <li>
                                <img src="__IMG__/stay_b12.png">可以茶道</li>
                            <li>
                                <img src="__IMG__/stay_b13.png">儿童游玩设施</li>
                            <li>
                                <img src="__IMG__/stay_b14.png">自家餐厅</li>
                        </ul>

                        <ul>
                            <li>
                                <img src="__IMG__/stay_b1.png">不限</li>
                            <li>
                                <img src="__IMG__/stay_b2.png">接机/接站</li>
                        </ul>

                        <ul>
                            <li>
                                <img src="__IMG__/stay_b1.png">不限</li>
                            <li>
                                <img src="__IMG__/stay_b2.png">接机/接站</li>
                        </ul>
                        <ul>
                            <li>
                                <img src="__IMG__/stay_b1.png">不限</li>
                            <li>
                                <img src="__IMG__/stay_b2.png">接机/接站</li>
                        </ul>
                        <ul>
                            <li>
                                <img src="__IMG__/stay_b1.png">不限</li>
                            <li>
                                <img src="__IMG__/stay_b2.png">接机/接站</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="land_btm">
                <div class="recom_list pr">
                </div>
            </div>

        </div>
        <div class="mask"></div>
        <div class="moda_box">
            <div class="moda_top">
                <div class="moda_list pr">
                    <div class="moda_left moda_click">4月30日 <span>周四</span>  <em>入住</em> 
                    </div>
                    <div class="moda_right pa">
                        <input type="button" class="moda_rightBtn moda_rightprev" value="前一天">
                        <input type="button" class="moda_rightBtn moda_rightnext" value="后一天">
                    </div>
                </div>

                <div class="moda_list pr">
                    <div class="moda_left moda_click">住10晚 <span>5月10日</span>  <em>离店</em> 
                    </div>
                    <div class="moda_right pa" style="top:.2rem">
                        <input type="button" class="moda_btmBtn moda_btmprev" value="-">
                        <input type="button" class="moda_btmBtn moda_btmnext" value="+">
                    </div>
                </div>
                <input type="button" class="moda_btn" value="确定">
            </div>

            <div class="moda_btm">
                <div class="vb_date">
                    <div class="time_top">
                        <div class="time_left left">
                            <img src="__IMG__/prev.png" />
                        </div>
                        <div class="time_center">2016-05</div>
                        <div class="time_right right">
                            <img src="__IMG__/next.png" />
                        </div>
                    </div>

                    <div class="time_btm">
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td>日</td>
                                <td>一</td>
                                <td>二</td>
                                <td>三</td>
                                <td>四</td>
                                <td>五</td>
                                <td>六</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="time_a1">1</div>

                                </td>
                                <td>
                                    <div class="time_a1">2</div>

                                </td>
                                <td>
                                    <div class="time_a1">3</div>

                                </td>
                                <td>
                                    <div class="time_a1">4</div>

                                </td>
                                <td>
                                    <div class="time_a1">5</div>

                                </td>
                                <td>
                                    <div class="time_a1">6</div>

                                </td>
                                <td>
                                    <div class="time_a1">7</div>

                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="time_a1">8</div>

                                </td>
                                <td>
                                    <div class="time_a1">9</div>

                                </td>
                                <td>
                                    <div class="time_a1">10</div>

                                </td>
                                <td>
                                    <div class="time_a1">11</div>

                                </td>
                                <td>
                                    <div class="time_a1">12</div>

                                </td>
                                <td>
                                    <div class="time_a1">13</div>

                                </td>
                                <td>
                                    <div class="time_a1">14</div>

                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="time_a1">15</div>

                                </td>
                                <td>
                                    <div class="time_a1">16</div>

                                </td>
                                <td>
                                    <div class="time_a1">17</div>

                                </td>
                                <td class="td_current">
                                    <div class="time_a1">今天</div>

                                </td>
                                <td>
                                    <div class="time_a1">19</div>

                                </td>
                                <td>
                                    <div class="time_a1">20</div>

                                </td>
                                <td>
                                    <div class="time_a1">21</div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="time_a1">22</div>
                                </td>
                                <td>
                                    <div class="time_a1">23</div>
                                </td>
                                <td>
                                    <div class="time_a1">24</div>
                                </td>
                                <td>
                                    <div class="time_a1">25</div>
                                </td>
                                <td>
                                    <div class="time_a1">26</div>
                                </td>
                                <td>
                                    <div class="time_a1">27</div>
                                </td>
                                <td>
                                    <div class="time_a1">28</div>

                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="time_a1">29</div>
                                </td>
                                <td>
                                    <div class="time_a1">30</div>
                                </td>
                                <td>
                                    <div class="time_a1">31</div>
                                </td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>

                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var falg = true;
        $(function()
        {
            $("#slider-range").slider(
            {
                range: true,
                min: 0,
                max: 5000,
                values: [75, 3000],
                slide: function(event, ui)
                {
                    $("#amount").val("$" + ui.values[0] +
                        " - $" + ui.values[1]);
                }
            });
        });
    </script>
    <script>
        $(function()
        {
            $(".moch_click li").click(function()
            {
                $(this).addClass("hm_cut").siblings().removeClass(
                    "hm_cut")
            })
        })
    </script>
    <script>
      $(function()
      {
          $(".stay_date").click(function()
          {
              $(".moda_box,.mask").fadeIn()
          })

          $(".mask").click(function()
          {
              $(".moda_box,.mask").fadeOut()
          })

          $(".moda_click").click(function()
          {
              $(".moda_btm").show()
          })
      })
    </script>
    <script>
    $('#h_l_back').click(function(evt) {
      evt.preventDefault();
      $('#hotel_list_frame').addClass('hide');
    });
  var hotelList = $('#hotel_list_frame');
  var itemHtml = '<div class="hotel_list_item">' +
                 '<a href="#" class="h_l_i_link_detail" data-id="">' +
                 '<div class="recom_a pr">' +
                 '<img class="h_l_i_banner" src="">' +
                 '<div class="recom_d pa">' + 
                 '<img src="" class="h_l_i_head">' +
                 '</div>' +
                 '<div class="recom_g f18 center pa">' +
                 '<div class="recom_g1 fl"><em>￥</em><span class="h_l_i_money">600</span><span>起</span>' +
                 '</div>' +
                 '<div class="recom_g2 fl">8.8<span>分</span>' +
                 '</div>' +
                 '</div>' +
                 '</div>' +
                 '</a>' +
                 '<div class="recom_c pa">' +
                 '<div class="recom_gg"></div>' +
                 '</div>' +
                 '<div class="recom_e">' +
                 '<div class="land_f1 recom_e1 f16 h_l_i_title">神秘西湖灵隐小客栈</div>' +
                 '<div class="recom_f">' +
                 '<div class="recom_f1 recom_hong f12 fl">' +
                 '<img src="__IMG__/add_e.png">距你 5.6km</div>' +
                 '<div class="recom_f2 fr">' +
                 '<div class="land_h recom_f3 vertical">' +
                 '<div class="land_h2 f12 vertical">' +
                 '<img src="__IMG__/poin.png">' +
                 '<span>68</span>' +
                 '</div>' +
                 '<div class="land_h1 f12 vertical">' +
                 '<img src="__IMG__/land_d3.png">' +
                 '<span>188</span>条评论' +
                 '</div>' +
                 '</div>' +
                 '</div>' + 
                 '</div>' +
                 '</div>' +
                 '</div>';
      $.ajax({
        'url': '{:U("Api/Hostel/get_hostel")}',
        'data': JSON.stringify({
          'p': 1,
          'num': 12
        }),
        'dataType': 'json',
        'processData': false,
        'contentType': 'text/xml',
        'type': 'post',
        'success': function(data) {
          makeHotelList(data.data);
        },
        'error': function(err, data) {
          console.log(err); 
        }
      });
      function makeHotelList(data) {
        console.log(data);
        for(var i = 0; i < data.length; i++) {
          var item = data[i];
          var newItem = $(itemHtml).clone();
          newItem.find('img.h_l_i_banner').attr('src', item.thumb);
          newItem.find('span.h_l_i_money').html(item.money);
          newItem.find('div.h_l_i_title').html(item.title);
          newItem.find('img.h_l_i_head').attr('src',item.head);
          newItem.find('a.h_l_i_link_detail').data('id', item.id);
          newItem.find('a.h_l_i_link_detail').click(getHotelDetail);
          $('div.recom_list').append(newItem);
        } 
      }
      function getHotelDetail(evt) {
        evt.preventDefault();
        var _this = $(this);
        var id = _this.data('id');
        $.ajax({
          'url': '{:U("Api/Hostel/show")}',
          'data': JSON.stringify({
            'id': id 
          }),
          'dataType': 'JSON',
          'contentType': 'text/xml',
          'processData': false,
          'type': 'post',
          'success': function(data) {
            if(data.code == 200) {
              showHotelDetail(data.data);
            } else {
              alert('获取详情错误！');
            }
          },
          'error': function(err, data) {
            console.log(err); 
          }
        });
      }
      function showHotelDetail(data) {
        console.log(data);
        var hDetail = $('#hotel_detail_frame');
        hDetail.find('img.h_d_banner').attr('src', data.thumb);
        hDetail.find('div.h_d_title').html(data.title);
        hDetail.find('span.h_d_price').html(data.money);
        hDetail.find('img.h_d_head').attr('src', data.head);
        hDetail.find('p.h_d_description').html(data.description);
        hDetail.find('div.tuiding').html(data.content);
        hDetail.find('a#h_d_join').data('id', data.id);
        hDetail.find('a#h_d_join').data('cityname', data.cityname);
        hDetail.find('a#h_d_join').data('title', data.title);
        hDetail.find('a#h_d_join').data('city', data.city);
        hDetail.find('a#h_d_join').data('place', data.note_hostel.place);
        hDetail.find('a#h_d_join').data('varname', data.note_hostel.type);
        hDetail.find('a#h_d_join').data('event', data.title);
        hDetail.removeClass('hide');
        hotelList.addClass('hide');
      }
    </script>
</div>
