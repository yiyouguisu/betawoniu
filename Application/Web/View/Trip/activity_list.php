<div class="page_frame hide" id="activity_list">
    <div class="header center z-index112 pr f18" style="position:fixed;left:0;top:0;right:0;z-index:9999">
        活动
        <div class="head_go pa">
            <a href="#" style="font-size:12px;" id="a_l_back">
                <img src="__IMG__/go.jpg">&nbsp;&nbsp;返回规划行程
            </a><span>&nbsp;</span>
        </div>
        <div class="tra_pr pa"><i></i>
            <a href="search-2.html">
                <img src="__IMG__/search.jpg">
            </a>
        </div>
    </div>
    <div class="container" style="margin-top:6rem">
        <div class="land">
            <div class="tra_list pr z-index112 center f14">
                <div class="tra_li tra_li_on">按特色</div>
                <div class="tra_drop">
                    <div class="act_pad">
                        <div class="dress_box">
                            <div class="dress_b act_a moch_click center f14">
                                <ul>
                                    <li>诗词歌赋</li>
                                    <li>谈经论股</li>
                                    <li>花前月下</li>
                                    <li>探险寻宝</li>
                                    <li>酒色生香</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tra_li tra_li_on">按时间</div>
                <div class="tra_drop">
                    <div class="date_box center">
                        <div class="vb_date">
                            <div class="time_top">
                                <div class="time_left left">
                                    <img src="__IMG__/prev.png" />
                                </div>
                                <div class="time_center">2016-05</div>
                                <div class="time_right right">
                                    <img src="__IMG__/next.png" />
                                </div>
                            </div>

                            <div class="time_btm">
                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td>日</td>
                                        <td>一</td>
                                        <td>二</td>
                                        <td>三</td>
                                        <td>四</td>
                                        <td>五</td>
                                        <td>六</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="time_a1">1</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">2</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">3</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">4</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">5</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">6</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">7</div>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="time_a1">8</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">9</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">10</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">11</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">12</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">13</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">14</div>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="time_a1">15</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">16</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">17</div>

                                        </td>
                                        <td class="td_current">
                                            <div class="time_a1">今天</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">19</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">20</div>

                                        </td>
                                        <td>
                                            <div class="time_a1">21</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="time_a1">22</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">23</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">24</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">25</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">26</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">27</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">28</div>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="time_a1">29</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">30</div>
                                        </td>
                                        <td>
                                            <div class="time_a1">31</div>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>

                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="tra_li tra_li_on">按位置</div>
                <div class="tra_drop">
                    <div class="tra_dropA_box">
                        <div class="tra_dropA">
                            <select>
                                <option>浙江省</option>
                                <option>江苏省</option>
                            </select>
                        </div>
                        <div class="tra_dropA">
                            <select>
                                <option>杭州市</option>
                                <option>苏州市</option>
                            </select>
                        </div>
                        <div class="tra_dropA">
                            <select>
                                <option>西湖区</option>
                                <option>园区</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="tra_li tra_li_on">筛选</div>
                <div class="tra_drop">
                    <div class="act_scring">
                        <div class="scr_top">
                            <div class="scr_e1" style="margin-bottom:2rem;">活动费用</div>
                            <div class="scr_b" style="margin-bottom:2rem;">
                                <div id="slider-range"></div>
                                <div class="number">
                                    <div class="number_a fl">￥0</div>
                                    <div class="number_b fr">￥500</div>
                                </div>
                            </div>
                            <div class="scr_c"></div>
                            <div class="scr_d center">免费活动</div>
                        </div>
                        <div class="scr_btm">
                            <div class="dress_box">
                                <div class="scr_e1">按类型 :</div>
                                <div class="dress_b act_a moch_click center f14">
                                    <ul>
                                        <li>不限</li>
                                        <li>亲子类</li>
                                        <li>情侣类</li>
                                        <li>家庭出游</li>
                                    </ul>
                                </div>
                                <div class="snail_d scr_e2 center f16">
                                    <a href="snail-1.html" class="mr_4">清除筛选</a>
                                    <a href="" class="snail_cut">确定</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="land_btm" style="">
                <div class="recom_list pr" id="a_l_container">
                </div>
            </div>
        </div>
        <div class="mask"></div>
    </div>
    <script>
      $('#a_l_back').click(function(evt) {
        evt.preventDefault();      
        $('#activity_list').addClass('hide');
      });
    </script>
    <script>
        (function($)
        {
            $.extend(
            {
                myTime:
                {
                    /**
                     *              * 当前时间戳
                     *                           * @return <int>        unix时间戳(秒)
                     *                                        */
                    CurTime: function()
                    {
                        return Date.parse(new Date()) / 1000;
                    },
                    /**              
                     *              * 日期 转换为 Unix时间戳
                     *                           * @param <string> 2014-01-01 20:20:20  日期格式
                     *                                        * @return <int>        unix时间戳(秒)
                     *                                                     */
                    DateToUnix: function(string)
                    {
                        var f = string.split(' ', 2);
                        var d = (f[0] ? f[0] : '').split('-',
                            3);
                        var t = (f[1] ? f[1] : '').split(':',
                            3);
                        return (new Date(
                            parseInt(d[0], 10) ||
                            null, (parseInt(d[1], 10) ||
                                1) - 1,
                            parseInt(d[2], 10) ||
                            null,
                            parseInt(t[0], 10) ||
                            null,
                            parseInt(t[1], 10) ||
                            null,
                            parseInt(t[2], 10) ||
                            null
                        )).getTime() / 1000;
                    },
                    /**              
                     *              * 时间戳转换日期
                     *                           * @param <int> unixTime    待时间戳(秒)
                     *                                        * @param <bool> isFull    返回完整时间(Y-m-d 或者 Y-m-d H:i:s)
                     *                                                     * @param <int>  timeZone   时区
                     *                                                                  */
                    UnixToDate: function(unixTime, isFull,
                        timeZone)
                    {
                        if (typeof(timeZone) == 'number')
                        {
                            unixTime = parseInt(unixTime) +
                                parseInt(timeZone) * 60 * 60;
                        }
                        var time = new Date(unixTime * 1000);
                        var ymdhis = "";
                        ymdhis += time.getUTCFullYear() + "-";
                        ymdhis += (time.getUTCMonth() + 1) +
                            "-";
                        ymdhis += time.getUTCDate();
                        if (isFull === true)
                        {
                            ymdhis += " " + time.getUTCHours() +
                                ":";
                            ymdhis += time.getUTCMinutes() +
                                ":";
                            ymdhis += time.getUTCSeconds();
                        }
                        return ymdhis;
                    }
                }
            });
        })(jQuery);
    </script>
    <script>
        var uid = '{$uid}';
        $.ajax(
        {
            type: 'post',
            url: '{:U("Api/Activity/get_activity")}',
            data: JSON.stringify(
            {
                uid: uid,
                p: 1,
                num: 12
            }),
            dataType: 'json',
            processData: false,
            contentType: 'text/xml',
            success: function(data)
            {
                makeActivityList(data.data);
            },
            error: function(err, data)
            {
                console.log(err);
            }
        });

        function makeActivityList(data)
        {
            var list = '';
            console.log(data);
            for (var i = 0; i < data.length; i++)
            {
                var item = data[i];
                list += '<div class="recom_a pr" style="padding:5px 0">' +
                    '<a href="activty-datails.html">' +
                    '<img src="' + item.thumb + '" class="thumb" data-id="' + item.id + '">' +
                    '</a>' +
                    '<div class="recom_d pa">' +
                    '<img src="' + item.head + '">' +
                    '</div>' +
                    '</div>' +
                    '<div class="recom_c pa">' +
                    '<div class="recom_gg"></div>' +
                    '</div>' +
                    '<div class="recom_e">' +
                    '<div class="land_f1 recom_e1 f16">' + item.title +
                    '</div>' +
                    '<div class="recom_k">' +
                    '<div class="land_font">' +
                    '<span>时间:</span> ' + $.myTime.UnixToDate(item.starttime) + ' 至 ' + $.myTime.UnixToDate(item.endtime) +
                    '</div>' +
                    '<div class="land_font">' +
                    '<span>地点:</span> 杭州西湖绿荫小道288号11幢808室' +
                    '</div>' +
                    '</div>' +
                    '<div class="recom_s f16">' +
                    '已参与：' +
                    '<span>' +
                    '<img src="__IMG__/land_d2.png">' +
                    '<img src="__IMG__/land_d2.png">' +
                    '<img src="__IMG__/land_d2.png">' +
                    '<img src="__IMG__/land_d2.png">' +
                    '<img src="__IMG__/land_d2.png">' +
                    '</span>' +
                    '<em>(..80人)</em>' +
                    '</div>' +
                    '</div>';

            }
            $('#a_l_container').html(list);
            $('#a_l_container').children().each(function(i, t) {
              var _this = $(t);
              var thumb = $(_this.find('img[class=thumb]'));
              thumb.click(function(evt) {
                evt.preventDefault();
                var id = thumb.data('id');
                $.ajax({
                  type: 'post',
                  url: '{:U("Api/Activity/show")}',
                  data: JSON.stringify({
                    id: id
                  }),
                  dataType: 'json',
                  processData: false,
                  contentType: 'text/xml',
                  success: function(data)
                  {
                    console.log(data);
                    showActivityDetail(data.data);
                  },
                  error: function(err, data)
                  {
                      console.log(err);
                  }
                });
              });
            });
        }
    </script>
    <script>
        $(function()
        {
            $("#slider-range").slider(
            {
                range: true,
                min: 0,
                max: 500,
                values: [75, 300],
                slide: function(event, ui)
                {
                    $("#amount").val("$" + ui.values[0] +
                        " - $" + ui.values[1]);
                }
            });
            $("#amount").val("$" + $("#slider-range").slider("values",
                    0) +
                " - $" + $("#slider-range").slider("values", 1));
        });
    </script>
    <script>
        $(function()
        {
            $(".moch_click li").click(function()
            {
                $(this).addClass("hm_cut").siblings().removeClass(
                    "hm_cut")
            })
        })
    </script>
</div>
